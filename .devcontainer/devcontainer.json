{
    "name": "PowerShell Development Environment",
    "image": "mcr.microsoft.com/devcontainers/universal:latest",
    // Features to add to the dev container. More info: https://containers.dev/features
    "features": {
        "ghcr.io/devcontainers/features/git:1": {},
        "ghcr.io/devcontainers/features/github-cli:1": {}
    },
    // Configure tool-specific properties
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-vscode.powershell",
                "ms-vscode.vscode-json",
                "redhat.vscode-yaml",
                "davidanson.vscode-markdownlint",
                "streetsidesoftware.code-spell-checker",
                "ms-vsliveshare.vsliveshare",
                "github.vscode-pull-request-github",
                "github.copilot",
                "github.copilot-chat"
            ],
            "settings": {
                "powershell.integratedConsole.showOnStartup": true,
                "powershell.promptToUpdatePowerShell": false,
                "powershell.enableProfileLoading": false,
                "powershell.codeFormatting.preset": "OTBS",
                "powershell.codeFormatting.openBraceOnSameLine": true,
                "powershell.codeFormatting.newLineAfterOpenBrace": true,
                "powershell.codeFormatting.newLineAfterCloseBrace": true,
                "powershell.codeFormatting.whitespaceBeforeOpenBrace": true,
                "powershell.codeFormatting.whitespaceBeforeOpenParen": true,
                "powershell.codeFormatting.whitespaceAroundOperator": true,
                "powershell.codeFormatting.whitespaceAfterSeparator": true,
                "powershell.codeFormatting.ignoreOneLineBlock": true,
                "powershell.scriptAnalysis.enable": true,
                "powershell.scriptAnalysis.settingsPath": ".vscode/PSScriptAnalyzerSettings.psd1",
                "files.defaultLanguage": "powershell",
                "files.encoding": "utf8",
                "files.eol": "\n",
                "terminal.integrated.defaultProfile.linux": "pwsh",
                "editor.tabSize": 4,
                "editor.insertSpaces": true,
                "editor.detectIndentation": false,
                "editor.formatOnSave": true,
                "editor.formatOnPaste": true,
                "editor.rulers": [
                    120
                ],
                "workbench.colorTheme": "PowerShell ISE"
            }
        }
    },
    // Use 'forwardPorts' to make a list of ports inside the container available locally
    // "forwardPorts": [],
    // Use 'postCreateCommand' to run commands after the container is created
    "postCreateCommand": ".devcontainer/setup.ps1",
    // Configure container user
    "remoteUser": "vscode",
    // Keep container running for performance
    "shutdownAction": "stopContainer",
    // Mount the local machine's Docker socket into the container
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
    ]
}
